/*
 * Problem 40 from Project Euler (projecteuler.net)
 *
 * Champernowne's Constant
 *
 * An irrational decimal fraction is created by concatenating the positive integers:
 *
 *                0.123456789101112131415161718192021 ...
 *
 * It can be seen that the 12th digit of the fractional part is 1.
 *
 * If dùëõ represents the ùëõth digit of the fractional part, find the value of the following expression.
 *
 *                d1 √ó d10 √ó d100 √ó d1000 √ó d10000 √ó d100000 √ó d1000000
 *
 */
$quiet on {

const TEST = 12
const DIGIT_NUMBERS = [ 1, 10, 1e2, 1e3, 1e4, 1e5, 1e6 ]

const LIMIT = max(DIGIT_NUMBERS)
var fraction_string = "."
var value = 1

// Construct a string with as many numeric values as we need to fulfill the search criteria
while length(fraction_string) <= LIMIT {
   fraction_string += @@value++
}
print `Length = ${length fraction_string}, last value = $value`

var digits = []
loop d over DIGIT_NUMBERS {
   digits += fraction_string[d]
}

} // end of quiet on

$resultsonly on {

   print `${TEST}th digit is ${fraction_string[TEST]}`
   print `Product of the ${DIGIT_NUMBERS}th digits is ${productOf(digits)}.`

} // end of results on

