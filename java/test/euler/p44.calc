/*
 * Problem 44 from Project Euler (projecteuler.net)
 *
 * Pentagon Numbers
 *
 * Pentagonal numbers are generated by the formula, P𝑛 = 𝑛(3𝑛 - 1)/2. The first ten pentagonal numbers are:
 *
 *                                 1, 5, 12, 22, 35, 51, 70, 92, 117, 145, ...
 *
 * It can be seen that P₄ + P₇ = 22 + 70 = 92 = P₈. However, their difference, 70 - 22 = 48, is not pentagonal.
 *
 * Find the pair of pentagonal numbers, Pʲ and Pᵏ, for which their sum and difference are pentagonal and D = |Pᵏ - Pʲ| is
 * minimised; what is the value of D?
 */
$quiet on {

// These limits must contain the Pj and Pk, as well as their sum and difference
const LOWER_LIMIT = 1000
const UPPER_LIMIT = 2400

var Dmin = 1e9
var j_min = -1
var k_min = -1

define pent(n) = (3 × n² - n) / 2

var pentagons = []
loop p over LOWER_LIMIT ... UPPER_LIMIT pentagons += pent(p)
const len = length(pentagons) - 1

loop _j over 0 .. len {
   loop _k over _j+1 .. len {
      const Pj = pentagons[_j]
      const Pk = pentagons[_k]
      const sum = Pj + Pk
      const diff = Pk - Pj
      if (sum in pentagons) && (diff in pentagons) {
         if diff < Dmin {
            Dmin = diff
            j_min = _j
            k_min = _k
$echo `New min D = $Dmin, j = ${_j + LOWER_LIMIT}, k = ${_k + LOWER_LIMIT}, Pj = $Pj, Pk = $Pk`
         }
      }
   }
}

} // end of quiet on

$resultsonly on {

   $echo `Minimum value of D is $Dmin, which comes from P${j_min+LOWER_LIMIT} = ${pentagons[j_min]} and P${k_min+LOWER_LIMIT} = ${pentagons[k_min]}.`

} // end of results on

